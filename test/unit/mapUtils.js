define(["mag/maps/maps-utils"], function (mapUtils) {
    var { assert } = intern.getPlugin("chai");
    var { registerSuite } = intern.getPlugin("interface.object");

    registerSuite("Maps Utils", {
        "GetRampsByNumAndType - 5 NaturalBreaks"() {
            const val = mapUtils.GetRampsByNumAndType("Sequential", 5);
            assert.equal(
                JSON.stringify(val),
                `{"YlGn":[["255","255","204"],["194","230","153"],["120","198","121"],["49","163","84"],["0","104","55"]],"YlGnBu":[["255","255","204"],["161","218","180"],["65","182","196"],["44","127","184"],["37","52","148"]],"GnBu":[["240","249","232"],["186","228","188"],["123","204","196"],["67","162","202"],["8","104","172"]],"BuGn":[["237","248","251"],["178","226","226"],["102","194","164"],["44","162","95"],["0","109","44"]],"PuBuGn":[["246","239","247"],["189","201","225"],["103","169","207"],["28","144","153"],["1","108","89"]],"PuBu":[["241","238","246"],["189","201","225"],["116","169","207"],["43","140","190"],["4","90","141"]],"BuPu":[["237","248","251"],["179","205","227"],["140","150","198"],["136","86","167"],["129","15","124"]],"RdPu":[["254","235","226"],["251","180","185"],["247","104","161"],["197","27","138"],["122","1","119"]],"PuRd":[["241","238","246"],["215","181","216"],["223","101","176"],["221","28","119"],["152","0","67"]],"OrRd":[["254","240","217"],["253","204","138"],["252","141","89"],["227","74","51"],["179","0","0"]],"YlOrRd":[["255","255","178"],["254","204","92"],["253","141","60"],["240","59","32"],["189","0","38"]],"YlOrBr":[["255","255","212"],["254","217","142"],["254","153","41"],["217","95","14"],["153","52","4"]],"Purples":[["242","240","247"],["203","201","226"],["158","154","200"],["117","107","177"],["84","39","143"]],"Blues":[["239","243","255"],["189","215","231"],["107","174","214"],["49","130","189"],["8","81","156"]],"Greens":[["237","248","233"],["186","228","179"],["116","196","118"],["49","163","84"],["0","109","44"]],"Oranges":[["254","237","222"],["253","190","133"],["253","141","60"],["230","85","13"],["166","54","3"]],"Reds":[["254","229","217"],["252","174","145"],["251","106","74"],["222","45","38"],["165","15","21"]],"Greys":[["247","247","247"],["204","204","204"],["150","150","150"],["99","99","99"],["37","37","37"]]}`
            );
        },
        "GetRampsByNumAndType - 5 GnBu"() {
            const val = mapUtils.GetColorRamp("Sequential", "GnBu", 5);
            assert.equal(
                JSON.stringify(val),
                `[{"r":"240","g":"249","b":"232"},{"r":"186","g":"228","b":"188"},{"r":"123","g":"204","b":"196"},{"r":"67","g":"162","b":"202"},{"r":"8","g":"104","b":"172"}]`
            );
        },
        "GetRampsByNumAndType - 5 GnBu"() {
            const val = mapUtils.GetColorRamp("Diverging", "PiYG", 5);
            assert.equal(
                JSON.stringify(val),
                `[{"r":"208","g":"28","b":"139"},{"r":"241","g":"182","b":"218"},{"r":"247","g":"247","b":"247"},{"r":"184","g":"225","b":"134"},{"r":"77","g":"172","b":"38"}]`
            );
        },

        "GetRampHtml - 5 GnBu"() {
            const ramp = [
                { r: "240", g: "249", b: "232" },
                { r: "186", g: "228", b: "188" },
                { r: "123", g: "204", b: "196" },
                { r: "67", g: "162", b: "202" },
                { r: "8", g: "104", b: "172" },
            ];

            const val = mapUtils.ColorRampToHTML(ramp, "GnBu", "Sequential");

            assert.equal(
                val,
                `<div data-type="Sequential" data-id="GnBu" class="cRamp"><div style="background-color:rgb(240, 249, 232)" class="colorRampSquare"></div><div style="background-color:rgb(186, 228, 188)" class="colorRampSquare"></div><div style="background-color:rgb(123, 204, 196)" class="colorRampSquare"></div><div style="background-color:rgb(67, 162, 202)" class="colorRampSquare"></div><div style="background-color:rgb(8, 104, 172)" class="colorRampSquare"></div></div>`
            );
        },

        "GetDynamicClassBreaks - 5 Jenks"() {
            let conf = `{"NodeType":"map","LayerId":0,"Name":"Total Population","ShortName":"Total Population","Service":"blockGroups","DefaultColorRamp":"OrRd","DefaultColorScheme":"Sequential","Description":"","FieldName":"TOTAL_POP","Type":"number","Placeholder":100000000,"breaks":{"Jenks3":[0,1653,3488,11176],"EqInterval3":[0,3725.3333333333335,7450.666666666667,11176],"Quantile3":[0,1163,1798,11176],"Jenks4":[0,1357,2397,4736,11176],"EqInterval4":[0,2794,5588,8382,11176],"Quantile4":[0,1018,1456,2011,11176],"Jenks5":[0,1239,2075,3368,6297,11176],"EqInterval5":[0,2235.2,4470.4,6705.599999999999,8940.8,11176],"Quantile5":[0,921,1284,1639,2170,11176],"Jenks6":[0,1068,1679,2414,3627,6297,11176],"EqInterval6":[0,1862.6666666666667,3725.3333333333335,5588,7450.666666666667,9313.333333333334,11176],"Quantile6":[0,863,1163,1456,1798,2313,11176],"Jenks7":[0,985,1540,2148,2945,4196,6739,11176],"EqInterval7":[0,1596.5714285714287,3193.1428571428573,4789.714285714286,6386.285714285715,7982.857142857143,9579.428571428572,11176],"Quantile7":[0,805,1075,1328,1578,1900,2440,11176],"Jenks8":[0,837,1287,1771,2387,3291,4646,6965,11176],"EqInterval8":[0,1397,2794,4191,5588,6985,8382,9779,11176],"Quantile8":[0,764,1018,1236,1456,1695,2011,2520,11176],"Jenks9":[0,814,1237,1662,2134,2701,3488,4736,6965,11176],"EqInterval9":[0,1241.7777777777778,2483.5555555555557,3725.3333333333335,4967.111111111111,6208.888888888889,7450.666666666666,8692.444444444443,9934.22222222222,11176],"Quantile9":[0,741,967,1163,1355,1546,1798,2089,2600,11176]},"category":"General"}`;
            let cbrCount = 5;
            let classType = "Jenks";

            mapUtils
                .GetDynamicClassBreaks(cbrCount, classType, conf)
                .then((res) => {
                    let breakValues = [0, 1197, 1966, 3064, 5349, 11176];
                    assert.equal(res, breakValues);
                });
        },
    });
});
